<?php
    add_theme_support( 'post-thumbnails' );

    // Register Menu
    function register_my_menu() {
    register_nav_menu('menu-principal',__( 'Menu principal' ));





    }
    add_action( 'init', 'register_my_menu' );

    /**
    * Register our sidebars and widgetized areas.
    *
    */
    function widgetHome() {

        register_sidebar( array(
            'name'          => 'Home events',
            'id'            => 'home_events',
            'before_widget' => '<div>',
            'after_widget'  => '</div>',
            'before_title'  => '<h3 class="rounded">',
            'after_title'   => '</h3>',
        ) );

    }
    add_action( 'widgets_init', 'widgetHome' );

    function widgetSocialNetwork() {

        register_sidebar( array(
            'name'          => 'Social Networks',
            'id'            => 'social_networks',
            'before_widget' => '<div>',
            'after_widget'  => '</div>',
            'before_title'  => '<h3 class="rounded">',
            'after_title'   => '</h3>',
        ) );

    }
    add_action( 'widgets_init', 'widgetSocialNetwork' );

    function lastComments() {

        register_sidebar( array(
            'name'          => 'Last Comments',
            'id'            => 'last_comments',
            'before_widget' => '<div>',
            'after_widget'  => '</div>',
            'before_title'  => '<h3 class="comments">',
            'after_title'   => '</h3>',
        ) );

    }
    add_action( 'widgets_init', 'lastComments' );

    function loginHome() {

        register_sidebar( array(
            'name'          => 'Login Home',
            'id'            => 'login_home',
            'before_widget' => '<div>',
            'after_widget'  => '</div>',
            'before_title'  => '<h3 class="login">',
            'after_title'   => '</h3>',
        ) );

    }
    add_action( 'widgets_init', 'loginHome' );

    function onlineUsers() {

        register_sidebar( array(
            'name'          => 'Online Users',
            'id'            => 'online_users',
            'before_widget' => '<div>',
            'after_widget'  => '</div>',
            'before_title'  => '<h3 class="title online">',
            'after_title'   => '</h3>',
        ) );

    }
    add_action( 'widgets_init', 'onlineUsers' );

            function bbp_list_forums( $args = '' ) { 
         
            // Define used variables 
            $output = $sub_forums = $topic_count = $reply_count = $counts = ''; 
            $i = 0; 
            $count = array(); 
         
            // Parse arguments against default values 
            $r = bbp_parse_args( $args, array( 
                'before' => '<ul class="bbp-forums-list">',  
                'after' => '</ul>',  
                'link_before' => '<li class="bbp-forum">',  
                'link_after' => '</li>',  
                'count_before' => ' (',  
                'count_after' => ')',  
                'count_sep' => ', ',  
                'separator' => ', ',  
                'forum_id' => '',  
                'show_topic_count' => true,  
                'show_reply_count' => true,  
         ), 'list_forums' ); 
         
            // Loop through forums and create a list 
            $sub_forums = bbp_forum_get_subforums( $r['forum_id'] ); 
            if ( !empty( $sub_forums ) ) { 
         
                // Total count (for separator) 
                $total_subs = count( $sub_forums ); 
                foreach ( $sub_forums as $sub_forum ) { 
                    $i++; // Separator count 
         
                    // Get forum details 
                    $count = array(); 
                    $show_sep = $total_subs > $i ? $r['separator'] : ''; 
                    $permalink = bbp_get_forum_permalink( $sub_forum->ID ); 
                    $title = bbp_get_forum_title( $sub_forum->ID ); 
         
                    // Show topic count 
                    if ( !empty( $r['show_topic_count'] ) && !bbp_is_forum_category( $sub_forum->ID ) ) { 
                        $count['topic'] = bbp_get_forum_topic_count( $sub_forum->ID ); 
                    } 
         
                    // Show reply count 
                    if ( !empty( $r['show_reply_count'] ) && !bbp_is_forum_category( $sub_forum->ID ) ) { 
                        $count['reply'] = bbp_get_forum_reply_count( $sub_forum->ID ); 
                    } 
         
                    // Counts to show 
                    if ( !empty( $count ) ) { 
                        $counts = $r['count_before'] . implode( $r['count_sep'], $count ) . $r['count_after']; 
                    } 
         
                    // Build this sub forums link 
                    $output .= $r['link_before'] . '<a href="' . esc_url( $permalink ) . '" class="bbp-forum-link">' . $title . $counts . '</a>' . $show_sep . $r['link_after']; 
                } 
         
                // Output the list 
                echo apply_filters( 'bbp_list_forums', $r['before'] . $output . $r['after'], $r ); 
            } 
        } 

?>
